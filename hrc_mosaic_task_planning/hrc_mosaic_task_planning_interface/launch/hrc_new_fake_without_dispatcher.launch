<?xml version="1.0"?>

<launch>

  <arg name="group_name_robot" default="ur5_on_guide"/>
  <arg name="group_name_human" default="human_right_arm"/>

  <arg name="platinum" default="false"/>
  <arg name="hrc" default="false"/>

  <arg name="recipe_name" default="recipe" />
  <param name="recipe_name" value="$(arg recipe_name)" />

  <!-- If recipe_path is set, all the recipes in folder "recipe_path" are executed (only if platinum=false, see below) -->

  <param name="autosync" value="false" />

  <arg name="robot_node" value="robot_task_interface" />
  <arg name="human_node" value="human_task_interface" />

  <arg name="prefix" value="/sharework/test/stiima"/>
  <arg name="robot_request_from_planner" value="$(arg prefix)/motion" />
  <arg name="human_request_from_planner" value="$(arg prefix)/human" />
  <arg name="robot_feedback_to_planner" value="$(arg prefix)/motion/feedback" />
  <arg name="human_feedback_to_planner" value="$(arg prefix)/human/feedback" />

  <param name="prefix" value="$(arg prefix)" />

  <!-- LOAD PARAMETERS ABOUT AGENTS -->
  <rosparam if="$(arg hrc)" command="load" file="$(find hrc_mosaic_task_planning_interface)/config/multiple_agents.yaml" />
  <rosparam unless="$(arg hrc)"  command="load" file="$(find hrc_mosaic_task_planning_interface)/config/single_agents.yaml" />


<!-- TASK PLANNER INTERFACE NODE-->
  <node name="task_planner_interface" pkg="task_planner_interface" type="taskServiceManager.py"  output="screen"/>

<!-- AGENTS NODES -->
  <include file="$(find hrc_mosaic_task_planning_interface)/launch/hrc_fake_single_agent.launch" >
      <arg name="group_name" value="ur5_on_guide" />
      <arg name="agent_node" value="robot_task_executor" />
      <arg name="home_position" value="ur5_home"/>
      <arg name="retry_position" value="ur5_away"/>
      <arg name="topic_request_from_planner" value="$(arg robot_request_from_planner)"/>
      <arg name="go_home_after_execution" value="false"/>
  </include>

  <include if="$(arg hrc)" file="$(find hrc_mosaic_task_planning_interface)/launch/hrc_fake_single_agent.launch" >
      <arg name="group_name" value="human_right_arm" />
      <arg name="agent_node" value="human_task_executor" />
      <arg name="home_position" value="human_home"/>
      <arg name="retry_position" value="human_away"/>
      <arg name="topic_request_from_planner" value="$(arg human_request_from_planner)"/>
      <arg name="go_home_after_execution" value="false"/>
  </include>

<!-- DB UPDATE NODE -->
<include file="$(find hrc_mosaic_task_planning_interface)/launch/mongo_handler.launch" />




</launch>
