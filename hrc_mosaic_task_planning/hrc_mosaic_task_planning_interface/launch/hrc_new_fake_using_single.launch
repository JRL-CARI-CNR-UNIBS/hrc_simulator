<?xml version="1.0"?>

<launch>

  <arg name="group_name_robot" default="ur5_on_guide"/>
  <arg name="group_name_human" default="human_right_arm"/>

  <arg name="platinum" default="false"/>
  <arg name="hrc" default="false"/>
  <arg name="starting_recipe" default="0"/>

  <param name="starting_recipe_number" value="$(arg starting_recipe)"/>

  <arg name="recipe" value="$(find hrc_mosaic_task_planning_interface)/plans/comparison_for_review_tcybernetics/recipe_proposed_method_3x3.yaml" />

  <arg name="recipe_name" default="recipe" />

  <!-- If recipe_path is set, all the recipes in folder "recipe_path" are executed (only if platinum=false, see below) -->
  <arg name="autosync" value="false" />

  <arg name="robot_node" value="robot_task_interface" />
  <arg name="human_node" value="human_task_interface" />

  <arg name="prefix" value="/sharework/test/stiima"/>
  <arg name="robot_request_from_planner" value="$(arg prefix)/motion" />
  <arg name="human_request_from_planner" value="$(arg prefix)/human" />
  <arg name="robot_feedback_to_planner" value="$(arg prefix)/motion/feedback" />
  <arg name="human_feedback_to_planner" value="$(arg prefix)/human/feedback" />




<!--
   DISPATCHERS NODE
-->
<include file="$(find hrc_mosaic_task_planning_interface)/launch/task_dispatcher.launch" >
    <arg name="platinum" value="$(arg platinum)" />
    <arg name="hrc" value="$(arg hrc)" />
    <arg name="prefix" value="$(arg prefix)" />
    <arg name="robot_request_from_planner" value="$(arg robot_request_from_planner)"/>
    <arg name="human_request_from_planner" value="$(arg human_request_from_planner)"/>
    <arg name="robot_feedback_to_planner" value="$(arg robot_feedback_to_planner)"/>
    <arg name="human_feedback_to_planner" value="$(arg human_feedback_to_planner)"/>
    <arg name="recipe" value="$(arg recipe)" />
    <arg name="autosync" value="$(arg autosync)" />
</include>

<!-- TASK PLANNER INTERFACE NODE-->
<include file="$(find hrc_mosaic_task_planning_interface)/launch/task_planner_interface.launch" >
    <arg name="hrc" value="$(arg hrc)" />
    <arg name="recipe_name" value="$(arg recipe_name)" />
    <arg name="prefix" value="$(arg prefix)" />

</include>

<!-- AGENTS NODES -->
  <include file="$(find hrc_mosaic_task_planning_interface)/launch/hrc_fake_single_agent.launch" >
      <arg name="group_name" value="$(arg group_name_robot)" />
      <arg name="agent_node" value="robot_task_executor" />
      <arg name="home_position" value="ur5_home"/>
      <arg name="retry_position" value="ur5_away"/>
      <arg name="topic_request_from_planner" value="$(arg robot_request_from_planner)"/>
      <arg name="go_home_after_execution" value="false"/>
  </include>

  <include if="$(arg hrc)" file="$(find hrc_mosaic_task_planning_interface)/launch/hrc_fake_single_agent.launch" >
      <arg name="group_name" value="$(arg group_name_human)" />
      <arg name="agent_node" value="$(arg human_node)" />
      <arg name="home_position" value="human_home"/>
      <arg name="retry_position" value="human_away"/>
      <arg name="topic_request_from_planner" value="$(arg human_request_from_planner)"/>
      <arg name="go_home_after_execution" value="false"/>
  </include>

<!-- DB UPDATE NODE -->
<include file="$(find hrc_mosaic_task_planning_interface)/launch/mongo_handler.launch" />




</launch>
